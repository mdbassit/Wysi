/*!
 * Copyright (c) 2023 Momo Bassit.
 * Licensed under the MIT License (MIT)
 * https://github.com/mdbassit/Wysi
 */
!function(e,t){"use strict";var a,i={el:"[data-wysi], .wysi-field",tools:["format","|","bold","italic","|",{label:"Text alignment",items:["alignLeft","alignCenter","alignRight","alignJustify"]},"|","ul","ol","|","indent","outdent","|","link","image"],darkMode:!1,height:200,autoGrow:!1,autoHide:!1,allowedTags:{br:{attributes:[],styles:[],isEmpty:!0}},customTags:[]},n={format:{tags:["p","h1","h2","h3","h4"],styles:["text-align"],label:"Select block format",paragraph:"Paragraph",heading:"Heading"},quote:{tags:["blockquote"],label:"Quote"},bold:{tags:["strong"],alias:["b"],label:"Bold"},italic:{tags:["em"],alias:["i"],label:"Italic"},underline:{tags:["u"],label:"Underline"},strike:{tags:["s"],alias:["del","strike"],label:"Strike-through",command:"strikeThrough"},alignLeft:{label:"Align left",command:"justifyLeft"},alignCenter:{label:"Align center",command:"justifyCenter"},alignRight:{label:"Align right",command:"justifyRight"},alignJustify:{label:"Justify",command:"justifyFull"},ul:{tags:["ul"],extraTags:["li"],styles:["text-align"],label:"Bulleted list",command:"insertUnorderedList"},ol:{tags:["ol"],extraTags:["li"],styles:["text-align"],label:"Numbered list",command:"insertOrderedList"},indent:{label:"Increase indent"},outdent:{label:"Decrease indent"},link:{tags:["a"],attributes:["href"],attributeLabels:["URL"],hasForm:!0,label:"Link"},image:{tags:["img"],attributes:["src","alt"],attributeLabels:["URL","Alternative text"],isEmpty:!0,hasForm:!0,label:"Image"},hr:{tags:["hr"],isEmpty:!0,label:"Horizontal line",command:"insertHorizontalRule"},removeFormat:{label:"Remove format"},unlink:{label:"Remove link"}},r={},o="wysi-selected",l="wysi-fragment-placeholder",s=["H1","H2","H3","H4"],c=["BLOCKQUOTE","HR","P","OL","UL"].concat(s),u=navigator.userAgent.search(/Gecko\//)>-1,d=function(e,a){return void 0===a&&(a=null),t.execCommand(e,!1,a)},p=function(e,t){return e.classList&&e.classList.contains(t)};function f(e,t,a,i){"string"==typeof a?e.addEventListener(t,(function(e){var t=e.target;t.matches(a)&&i.call(t,e)})):(i=a,e.addEventListener(t,i))}function h(e){var t=b("template");return t.innerHTML=e.trim(),t.content}function m(e){return e?JSON.parse(JSON.stringify(e)):e}function b(e,a){var i=t.createElement(e);if(a)for(var n in a)"_"===n[0]?i[n.substring(1)]=a[n]:i.setAttribute(n,a[n]);return i}function v(e,a){a=void 0!==a?a:[],"loading"!==t.readyState?e.apply(void 0,a):f(t,"DOMContentLoaded",(function(){e.apply(void 0,a)}))}function y(e){for(var a,i,n,r=[];e&&e!==t.body;){if(e.tagName){if(p(e,"wysi-wrapper")){a=e;break}r.push(e)}e=e.parentNode}if(a){var o=a.children;i=o[0],n=o[1]}return{toolbar:i,editor:n,nodes:r}}function g(e){return e.getAttribute("data-wid")}function w(e){var a,i=e.parentNode,n=e.id;if("LABEL"===i.nodeName?a=i:void 0!==n&&(a=t.querySelector('label[for="'+n+'"]')),a){var r=[].filter.call(a.childNodes,(function(e){return 3===e.nodeType})).map((function(e){return e.textContent.replace(/\s+/g," ").trim()})).filter((function(e){return""!==e}))[0];if(r)return r}return""}function x(){a&&(H(a),a=void 0)}function A(e){a=e}function H(e){var a=t.getSelection();a.removeAllRanges(),a.addRange(e)}function E(e,t){e.setAttribute("aria-expanded",t)}function C(e,t,a){void 0===a&&(a=[]);var i=n[e];if(i){var r=i.command||e;x(),function(e,t){switch(e){case"quote":t[0]="blockquote";case"format":d("formatBlock","<"+t[0]+">");break;case"link":d("createLink",t[0]);break;case"image":var a=t[0],i=t[1],n=void 0===i?"":i,r=t[2],o='<img src="'+a+'" alt="'+n+'" class="wysi-selected">',l=r?r.replace(/<img[^>]+>/i,o):o;d("insertHTML",l);break;default:d(e)}}(r,a),t.focus()}}function k(e){var t=e.label,a=e.items,i=a[0],n=b("div",{class:["wysi-listbox"].concat(e.classes||[]).join(" ")}),r=b("button",{type:"button",title:t,"aria-label":t+" "+i.label,"aria-haspopup":"listbox","aria-expanded":!1,_innerHTML:L(i)}),o=b("div",{role:"listbox",tabindex:-1,"aria-label":t});return a.forEach((function(e){var t=b("button",{type:"button",role:"option",tabindex:-1,"aria-label":e.label,"aria-selected":!1,"data-action":e.action,"data-option":e.name||"",_innerHTML:L(e)});o.appendChild(t)})),n.appendChild(r),n.appendChild(o),n}function L(e){return e.icon?'<svg><use href="#wysi-'+e.icon+'"></use></svg>':e.label}function N(e){var t="true"===e.getAttribute("aria-expanded"),a=e.nextElementSibling,i=a.querySelector('[aria-selected="true"]');i||(i=a.firstElementChild),E(e,!t),i.focus()}function S(e){var t=e.parentNode,a=t.previousElementSibling,i=t.querySelector('[aria-selected="true"]');i&&i.setAttribute("aria-selected","false"),e.setAttribute("aria-selected","true"),a.innerHTML=e.innerHTML}function z(){var e=t.querySelector('.wysi-listbox [aria-expanded="true"]');e&&E(e,!1)}function T(e){var a=t.querySelector('.wysi-popover [aria-expanded="true"]');a&&E(a,!1),e||x()}void 0!==NodeList&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),f(t,"click",".wysi-listbox > button",(function(e){z(),N(e.target),e.stopImmediatePropagation()})),f(t,"keydown",".wysi-listbox > button",(function(e){switch(e.key){case"ArrowUp":case"ArrowDown":case"Enter":case" ":N(e.target),e.preventDefault()}})),f(t.documentElement,"mousemove",".wysi-listbox > div > button",(function(e){e.target.focus()})),f(t,"click",".wysi-listbox > div > button",(function(e){var a=e.target,i=a.getAttribute("data-action"),n=a.getAttribute("data-option"),r=y(a).editor,o=t.getSelection();o&&r.contains(o.anchorNode)&&C(i,r,[n]),S(a)})),f(t,"keydown",".wysi-listbox > div > button",(function(e){var t=e.target,a=t.parentNode,i=a.previousElementSibling,n=!0;switch(e.key){case"ArrowUp":var r=t.previousElementSibling;r&&r.focus();break;case"ArrowDown":var o=t.nextElementSibling;o&&o.focus();break;case"Home":a.firstElementChild.focus();break;case"End":a.lastElementChild.focus();break;case"Tab":t.click();break;case"Escape":E(i,!1);break;default:n=!1}n&&e.preventDefault()})),f(t,"click",(function(e){z()})),f(t,"click",".wysi-popover > button",(function(e){T(),function(e){var a=e.nextElementSibling.querySelectorAll("input"),i=t.getSelection(),r=i.anchorNode,l=y(r),s=l.editor,c=l.nodes,u=[];if(s){var d=e.getAttribute("data-action"),p=n[d],f=c.filter((function(e){return p.tags.includes(e.tagName.toLowerCase())}))[0],h=!0;if(f||(f=s.querySelector("."+o),h=!1),f){var m=t.createRange();h?m.selectNodeContents(f):m.selectNode(f),A(m),p.attributes.forEach((function(e){u.push(f.getAttribute(e))}))}else i&&s.contains(r)&&i.rangeCount&&A(i.getRangeAt(0))}a.forEach((function(e,t){e.value=u[t]||""})),E(e,!0),a[0].focus()}(e.target),e.stopImmediatePropagation()})),f(t,"click",".wysi-popover > div > button[data-action]",(function(e){!function(e){var t=e.getAttribute("data-action"),a=e.parentNode.querySelectorAll("input"),i=y(e).editor,n=[];if(a.forEach((function(e){n.push(e.value)})),"image"===t){var r=i.querySelector("."+o),l=r?r.parentNode:{};r&&"A"===l.tagName&&n.push(l.outerHTML)}C(t,i,n)}(e.target),T(!0)})),f(t,"click",".wysi-popover > div > button:not([data-action])",(function(e){T()})),f(t,"click",".wysi-popover *:not(button)",(function(e){e.stopImmediatePropagation()})),f(t,"keydown",".wysi-popover *",(function(e){var t=e.target,a=t.parentNode,i="DIV"===a.tagName?a:a.parentNode;switch(e.key){case"Tab":var n=i.querySelector("input");e.shiftKey?t===n&&(i.lastElementChild.focus(),e.preventDefault()):t.nextElementSibling||t.parentNode.nextElementSibling||(n.focus(),e.preventDefault());break;case"Enter":if("INPUT"===t.tagName)i.querySelector("[data-action]:last-of-type").click(),e.preventDefault();break;case"Escape":T()}}));var M=!1;function q(e,t){var a=b("div",{class:"wysi-toolbar"});return e.forEach((function(e){switch(e){case"|":a.appendChild(b("div",{class:"wysi-separator"}));break;case"-":a.appendChild(b("div",{class:"wysi-newline"}));break;case"format":a.appendChild(function(e){var t=e.format||n.format.label,a=e.paragraph||n.format.paragraph,i=e.heading||n.format.heading,r="wysi-format",o=n.format.tags.map((function(e){return{name:e,label:"p"===e?a:i+" "+e.substring(1),action:"format"}}));return k({label:t,items:o,classes:r})}(t));break;default:"object"==typeof e?e.items&&a.appendChild(function(e,t){var a=e.label||t.select||"Select an item",i=e.items.map((function(e){var a=n[e];return{label:t[e]||a.label,icon:e,action:e}}));return k({label:a,items:i})}(e,t)):function(e,t,a){var i=n[e],r=a[e]||i.label,o=b("button",{type:"button",title:r,"aria-label":r,"aria-pressed":!1,"data-action":e,_innerHTML:'<svg><use href="#wysi-'+e+'"></use></svg>'});if(i.hasForm){var l=function(e,t,a){var i=n[e],r=i.attributeLabels,o=i.attributes.map((function(e,t){return{name:e,label:a[e]||r[t]}})),l=b("div",{class:"wysi-popover"}),s=b("div",{tabindex:-1});t.setAttribute("aria-haspopup",!0),t.setAttribute("aria-expanded",!1),l.appendChild(t),l.appendChild(s),o.forEach((function(e){var t=b("label"),a=b("span",{_textContent:e.label}),i=b("input",{type:"text"});t.appendChild(a),t.appendChild(i),s.appendChild(t)}));var c=b("button",{type:"button",_textContent:a.cancel||"Cancel"}),u=b("button",{type:"button","data-action":e,_textContent:a.save||"Save"});if("link"===e){var d="unlink",p=a[d]||n[d].label;s.appendChild(b("button",{type:"button",title:p,"aria-label":p,"data-action":d,_innerHTML:'<svg><use href="#wysi-delete"></use></svg>'}))}return s.appendChild(c),s.appendChild(u),l}(e,o,a);t.appendChild(l)}else t.appendChild(o)}(e,a,t)}})),a}f(t,"click",(function(e){M||T()})),f(t,"mousedown",".wysi-popover, .wysi-popover *",(function(e){M=!0})),f(t,"mouseup",(function(e){setTimeout((function(){M=!1}))})),f(t,"click",".wysi-editor, .wysi-editor *",(function(e){var a=t.querySelector("."+o);a&&a!==e.target&&a.classList.remove(o)})),f(t,"click",".wysi-editor img",(function(e){var a=e.target,i=t.createRange();a.classList.add(o),i.selectNode(a),H(i)})),f(t,"click",".wysi-toolbar > button",(function(e){var a=e.target,i=a.getAttribute("data-action"),n=y(a).editor,r=t.getSelection();r&&n.contains(r.anchorNode)&&C(i,n)})),f(t,"selectionchange",(function(){var e=y(t.getSelection().anchorNode),a=e.toolbar,i=e.editor,n=e.nodes,o=n.map((function(e){return e.tagName.toLowerCase()}));if(i){var l=g(i),s=r[l].allowedTags;a.querySelectorAll('[aria-pressed="true"]').forEach((function(e){return e.setAttribute("aria-pressed","false")})),a.querySelectorAll(".wysi-listbox > div > button:first-of-type").forEach((function(e){return S(e)})),o.forEach((function(e,t){switch(e){case"p":case"h1":case"h2":case"h3":case"h4":case"li":var i=a.querySelector('[data-action="format"][data-option="'+e+'"]'),r=n[t].style.textAlign;if(i&&S(i),r){var o="align"+r.charAt(0).toUpperCase()+r.slice(1),l=a.querySelector('[data-action="'+o+'"]');l&&("listbox"===l.parentNode.getAttribute("role")?S(l):l.setAttribute("aria-pressed","true"))}break;default:var c=s[e],u=c?c.toolName:void 0;if(u)a.querySelector('[data-action="'+u+'"]').setAttribute("aria-pressed","true")}}))}})),v((function(){var e=h('<svg id="wysi-svg-icons" xmlns="http://www.w3.org/2000/svg"><defs><symbol id="wysi-bold" viewBox="0 0 24 24"><path d="M16.5,9.5A3.5,3.5,0,0,0,13,6H8.5a1,1,0,0,0-1,1V17a1,1,0,0,0,1,1H13a3.49,3.49,0,0,0,2.44-6A3.5,3.5,0,0,0,16.5,9.5ZM13,16H9.5V13H13a1.5,1.5,0,0,1,0,3Zm0-5H9.5V8H13a1.5,1.5,0,0,1,0,3Z"></path></symbol><symbol id="wysi-italic" viewBox="0 0 24 24"><path d="M17,6H11a1,1,0,0,0,0,2h1.52l-3.2,8H7a1,1,0,0,0,0,2h6a1,1,0,0,0,0-2H11.48l3.2-8H17a1,1,0,0,0,0-2Z"></path></symbol><symbol id="wysi-underline" viewBox="0 0 24 24"><path d="M12,15.5a5,5,0,0,0,5-5v-5a1,1,0,0,0-2,0v5a3,3,0,0,1-6,0v-5a1,1,0,0,0-2,0v5A5,5,0,0,0,12,15.5Zm5,2H7a1,1,0,0,0,0,2H17a1,1,0,0,0,0-2Z"></path></symbol><symbol id="wysi-strike" viewBox="0 0 24 24"><path d="M12 6C9.33 6 7.5 7.34 7.5 9.5c0 .58.12 1.07.35 1.5H13c-1.49-.34-3.49-.48-3.5-1.5 0-1.03 1.08-1.75 2.5-1.75s2.5.83 2.5 1.75h2C16.5 7.4 14.67 6 12 6zm-5.5 6c-.67 0-.67 1 0 1h4.35c.5.17 1.04.34 1.65.5.58.15 1.75.23 1.75 1s-.66 1.75-2.25 1.75-2.5-1.01-2.5-1.75h-2c0 1.64 1.33 3.5 4.5 3.5s4.5-2.08 4.5-3.5c0-.58-.05-1.07-.2-1.5h1.2c.67 0 .67-1 0-1z"></path></symbol><symbol id="wysi-alignLeft" viewBox="0 0 24 24"><path d="m4 8h16c1.33 0 1.33-2 0-2h-16c-1.33 0-1.33 2 0 2zm0 5h12c1.33 0 1.33-2 0-2h-12c-1.33 0-1.33 2 0 2zm16 3h-16c-1.33 0-1.33 2 0 2h16c1.34 0 1.29-2 0-2z"></path></symbol><symbol id="wysi-alignCenter" viewBox="0 0 24 24"><path d="m20 8h-16c-1.33 0-1.33-2 0-2h16c1.33 0 1.33 2 0 2zm-4 5h-8c-1.33 0-1.33-2 0-2h8c1.33 0 1.33 2 0 2zm-12 3h16c1.33 0 1.33 2 0 2h-16c-1.34 0-1.29-2 0-2z"></path></symbol><symbol id="wysi-alignRight" viewBox="0 0 24 24"><path d="m20 8h-16c-1.33 0-1.33-2 0-2h16c1.33 0 1.33 2 0 2zm0 5h-12c-1.33 0-1.33-2 0-2h12c1.33 0 1.33 2 0 2zm-16 3h16c1.33 0 1.33 2 0 2h-16c-1.34 0-1.29-2 0-2z"></path></symbol><symbol id="wysi-alignJustify" viewBox="0 0 24 24"><path d="m20 8h-16c-1.33 0-1.33-2 0-2h16c1.33 0 1.33 2 0 2zm0 5h-16c-1.33 0-1.33-2 0-2h16c1.33 0 1.33 2 0 2zm-16 3h16c1.33 0 1.33 2 0 2h-16c-1.34 0-1.29-2 0-2z"></path></symbol><symbol id="wysi-ul" viewBox="0 0 24 24"><path d="M3 6a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1zm4 0a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2H7zm-4 5a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1zm4 0a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2H7zm-4 5a1 1 0 0 0-1 1 1 1 0 0 0 1 1 1 1 0 0 0 1-1 1 1 0 0 0-1-1zm4 0a1 1 0 0 0 0 2h14a1 1 0 0 0 0-2H7z"></path></symbol><symbol id="wysi-ol" viewBox="0 0 24 24"><path d="M4 5c-.25 0-.5.17-.5.5v3c0 .67 1 .67 1 0v-3c0-.33-.25-.5-.5-.5zm4.5 1c-1.33 0-1.33 2 0 2h12c1.33 0 1.33-2 0-2zm-6 5.5h.75c0-.43.34-.75.75-.75.4 0 .75.28.75.75L2.5 13.25V14h3v-.75H3.75L5.5 12v-.5c0-.9-.73-1.49-1.5-1.5-.77 0-1.5.59-1.5 1.5zm6-.5c-1.33 0-1.33 2 0 2h12c1.33 0 1.33-2 0-2zM4 15c-.83 0-1.5.63-1.5 1.25h.75c0-.28.34-.5.75-.5s.75.22.75.5-.34.5-.75.5v.5c.41 0 .75.22.75.5s-.34.5-.75.5-.75-.22-.75-.5H2.5c0 .62.67 1.25 1.5 1.25s1.5-.5 1.5-1.12c0-.34-.2-.66-.56-.88.35-.2.56-.53.56-.87 0-.62-.67-1.12-1.5-1.12zm4.5 1c-1.33 0-1.33 2 0 2h12c1.33 0 1.33-2 0-2z"></path></symbol><symbol id="wysi-indent" viewBox="0 0 24 24"><path d="m20 8h-15.9c-1.33 0-1.33-2 0-2h15.9c1.33 0 1.33 2 0 2zm2.86e-4 5h-9.08c-1.33 0-1.33-2 0-2h9.08c1.33 0 1.33 2 0 2zm-16.7-3.31c0.356-0.423 0.988-0.477 1.41-0.12l2 1.66c0.483 0.4 0.483 1.14 0 1.54l-2 1.66c-0.179 0.153-0.405 0.238-0.64 0.24-0.297 4.83e-4 -0.58-0.131-0.77-0.36-0.354-0.425-0.296-1.06 0.13-1.41l1.08-0.9-1.08-0.9c-0.426-0.353-0.484-0.985-0.13-1.41zm0.77 6.31h15.9c1.33 0 1.33 2 0 2h-15.9c-1.33 0-1.33-2 0-2z"></path></symbol><symbol id="wysi-outdent" viewBox="0 0 24 24"><path d="m4.1 6c-1.33 0-1.33 2 0 2h15.9c1.33 0 1.33-2 0-2h-15.9zm1.96 3.33c-0.224 0.00238-0.448 0.0803-0.633 0.236l-2 1.66c-0.483 0.4-0.483 1.14 0 1.54l2 1.66c0.179 0.153 0.404 0.238 0.639 0.24 0.297 4.83e-4 0.581-0.131 0.771-0.359 0.354-0.425 0.295-1.06-0.131-1.41l-1.08-0.9 1.08-0.9c0.426-0.353 0.485-0.985 0.131-1.41-0.2-0.238-0.489-0.359-0.777-0.355zm4.88 1.67c-1.33 0-1.33 2 0 2h9.08c1.33 0 1.33-2 0-2h-9.08zm-6.87 5c-1.33 0-1.33 2 0 2h15.9c1.33 0 1.33-2 0-2h-15.9z"></path></symbol><symbol id="wysi-link" viewBox="0 0 24 24"><path d="M8,12a1,1,0,0,0,1,1h6a1,1,0,0,0,0-2H9A1,1,0,0,0,8,12Zm2,3H7A3,3,0,0,1,7,9h3a1,1,0,0,0,0-2H7A5,5,0,0,0,7,17h3a1,1,0,0,0,0-2Zm7-8H14a1,1,0,0,0,0,2h3a3,3,0,0,1,0,6H14a1,1,0,0,0,0,2h3A5,5,0,0,0,17,7Z"></path></symbol><symbol id="wysi-image" viewBox="0 0 24 24"><path d="M6 5a3 3 0 0 0-3 3v8a3 3 0 0 0 3 3h12a3 3 0 0 0 3-3V8a3 3 0 0 0-3-3H6zm0 2h12a1 1 0 0 1 1 1v5.73l-.88-.88a3.06 3.06 0 0 0-4.24 0l-.88.88-2.88-2.88A3.06 3.06 0 0 0 8 10a3.06 3.06 0 0 0-2.12.85l-.88.88V8a1 1 0 0 1 1-1zm1.85 4.98a1 1 0 0 1 .85.27L13.45 17H6a1 1 0 0 1-.98-.92H5v-1.53l2.3-2.3a1 1 0 0 1 .55-.26zm8 2a1 1 0 0 1 .85.27l2.17 2.16c-.19.33-.55.59-.86.59h-1.72l-1.86-1.87.88-.88a1 1 0 0 1 .54-.28z"></path></symbol><symbol id="wysi-quote" viewBox="0 0 24 24"><path d="m9 6c-2.2 0-4 1.96-4 4.36v6c0 0.903 0.672 1.64 1.5 1.64h3c0.828 0 1.5-0.733 1.5-1.64v-3.27c0-0.903-0.672-1.64-1.5-1.64h-1.75c-0.414 0-0.75-0.367-0.75-0.818v-0.273c0-1.2 0.899-2.18 2-2.18h0.5c0.274 0 0.5-0.246 0.5-0.545v-1.09c0-0.298-0.226-0.545-0.5-0.545zm8 0c-2.2 0-4 1.96-4 4.36v6c0 0.903 0.672 1.64 1.5 1.64h3c0.828 0 1.5-0.733 1.5-1.64v-3.27c0-0.903-0.672-1.64-1.5-1.64h-1.75c-0.414 0-0.75-0.367-0.75-0.818v-0.273c0-1.2 0.899-2.18 2-2.18h0.5c0.274 0 0.5-0.246 0.5-0.545v-1.09c0-0.298-0.226-0.545-0.5-0.545z"></path></symbol><symbol id="wysi-hr" viewBox="0 0 24 24"><path d="m20 11h-16c-1.33 0-1.33 2 0 2 0 0 16-0.018 16 0 1.33 0 1.33-2 0-2z"></path></symbol><symbol id="wysi-removeFormat" viewBox="0 0 24 24"><path d="M7 6C5.67 6 5.67 8 7 8h3l-2 7c0 .02 2 0 2 0l2-7h3c1.33 0 1.33-2 0-2H7zm7.06 7c-.79-.04-1.49.98-.75 1.72l.78.78-.78.79c-.94.93.47 2.35 1.4 1.4l.79-.78.78.79c.94.93 2.35-.47 1.41-1.41l-.78-.79.78-.78c.94-.94-.47-2.35-1.4-1.41l-.8.79-.77-.79a.99.99 0 0 0-.66-.3zM7 16c-1.33 0-1.33 2 0 2 .02-.02 4 0 4 0 1.33 0 1.33-2 0-2H7z"></path></symbol><symbol id="wysi-delete" viewBox="0 0 24 24"><path d="M10,18a1,1,0,0,0,1-1V11a1,1,0,0,0-2,0v6A1,1,0,0,0,10,18ZM20,6H16V5a3,3,0,0,0-3-3H11A3,3,0,0,0,8,5V6H4A1,1,0,0,0,4,8H5V19a3,3,0,0,0,3,3h8a3,3,0,0,0,3-3V8h1a1,1,0,0,0,0-2ZM10,5a1,1,0,0,1,1-1h2a1,1,0,0,1,1,1V6H10Zm7,14a1,1,0,0,1-1,1H8a1,1,0,0,1-1-1V8H17Zm-3-1a1,1,0,0,0,1-1V11a1,1,0,0,0-2,0v6A1,1,0,0,0,14,18Z"></path></symbol></defs></svg>');t.body.appendChild(e)}));var B="style";function R(e,t){var a=b("div"),i=h(e);return D(i,t),function(e){var t=Array.from(e.childNodes);if(!t||!t.length)return;var a=!1;t.forEach((function(e){if(3!==e.nodeType&&c.includes(e.tagName))a=!1;else if(a){var t=e.previousElementSibling;t&&t.appendChild(e)}else V(e,"p"),a=!0}))}(i),j(i,t),a.appendChild(i),a.innerHTML}function V(e,t,a){var i=b(t),n=e.parentNode,r=e.attributes;if(i.innerHTML=e.innerHTML||e.textContent||e.outerHTML,a&&r)for(var o=0;o<r.length;o++)i.setAttribute(r[o].name,r[o].value);n.replaceChild(i,e)}function Z(e,t){var a=e.getAttribute(B);if(a){var i=a.split(";").map((function(e){var t=e.split(":");return{name:t[0].trim(),value:t[1]}})).filter((function(e){return t.includes(e.name)})).map((function(e){return e.name+": "+e.value.trim()+";"})).join("");""!==i?e.setAttribute(B,i):e.removeAttribute(B)}}function D(e,t){var a=Array.from(e.childNodes);a&&a.length&&a.forEach((function(a){if(1===a.nodeType){D(a,t);var i=a.tagName.toLowerCase(),n=t[i],r=Array.from(a.attributes);if(n){for(var o=n.attributes||[],l=n.styles||[],s=0;s<r.length;s++){var c=r[s].name;o.includes(r[s].name)||(c===B&&l.length?Z(a,l):a.removeAttribute(r[s].name))}n.alias&&V(a,n.alias,!0)}else"style"===i?e.removeChild(a):a.replaceWith.apply(a,a.childNodes)}else 8===a.nodeType&&e.removeChild(a)}))}function j(e,t){var a=Array.from(e.childNodes);a&&a.length&&a.forEach((function(a){if(1===a.nodeType){j(a,t);var i=a.tagName.toLowerCase(),n=t[i];n&&!n.isEmpty&&""===a.innerHTML.replace(/^\s+|\s+$/g,"").trim()&&e.removeChild(a)}}))}var U=0;function I(a){var o=e.wysiGlobalTranslations||{},l=Object.assign({},o,a.translations||{}),s=a.tools||i.tools,c=function(e){return"string"==typeof e?Array.from(t.querySelectorAll(e)):e instanceof Node?[e]:e instanceof NodeList||e instanceof HTMLCollection?Array.from(e):Array.isArray(e)?e.filter((function(e){return e instanceof Node})):[]}(a.el||i.el),u=q(s,l),d=function(e){var t=m(i.allowedTags);return e.forEach((function(e){var a=m(n[e]);if(a&&a.tags){var i=!!a.isEmpty,r=a.extraTags||[],o=a.alias||[],l=o.length?a.tags[0]:void 0,s=[].concat(a.tags,r,o),c=a.attributes||[],u=a.styles||[];s.forEach((function(a){t[a]={attributes:c,styles:u,alias:l,isEmpty:i},r.includes(a)||(t[a].toolName=e)}))}})),t}(s);(a.customTags||[]).forEach((function(e){if(e.tags){var t=e.attributes||[],a=e.styles||[],i=!!e.isEmpty;e.tags.forEach((function(e){d[e]={attributes:t,styles:a,isEmpty:i}}))}})),c.forEach((function(e){var t=e.previousElementSibling;if(t&&p(t,"wysi-wrapper"))O(t,a);else{var i=U++;r[i]=a,r[i].allowedTags=m(d);var n=b("div",{class:"wysi-wrapper"}),o=b("div",{class:"wysi-editor",contenteditable:!0,role:"textbox","aria-multiline":!0,"aria-label":w(e),"data-wid":i,_innerHTML:R(e.value,d)});n.appendChild(u.cloneNode(!0)),n.appendChild(o),e.before(n),O(n,a)}}))}function O(e,t){if("object"==typeof t)for(var a in t)switch(a){case"darkMode":case"autoGrow":case"autoHide":e.classList.toggle("wysi-"+a.toLowerCase(),!!t[a]);break;case"height":var i=t.height;if(!isNaN(i)){var n=e.lastChild;n.style.minHeight=i+"px",n.style.maxHeight=i+"px"}}}function _(e){t.querySelectorAll(e).forEach((function(e){var t=e.previousElementSibling;if(t&&p(t,"wysi-wrapper")){var a=g(t.lastChild);delete r[a],t.remove()}}))}function P(e){var t=y(e.target),a=t.editor,i=t.nodes,n=e.clipboardData;if(a&&n.types.includes("text/html")){var o=n.getData("text/html"),p=g(a),f=R(o,r[p].allowedTags),h=i.filter((function(e){return s.includes(e.tagName)})).length>0;if(h&&!u){var m='<h1 class="'+l+'"><br></h1><p class="'+l+'"><br></p>';f=m+f+m}d("insertHTML",f),h&&!u&&(a.querySelectorAll("."+l).forEach((function(e){e.remove()})),a.querySelectorAll(s.join()).forEach((function(e){var t=e.firstElementChild;t&&c.includes(t.tagName)&&e.replaceWith.apply(e,e.childNodes)}))),e.preventDefault()}}e.Wysi=function(){var e={destroy:_};function t(e){v((function(){I(e||{})}))}var a=function(a){t[a]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];v(e[a],i)}};for(var i in e)a(i);return t}(),v((function(){d("styleWithCSS",!1),d("enableObjectResizing",!1),d("enableInlineTableEditing",!1),d("defaultParagraphSeparator","p"),f(t,"input",".wysi-editor",(function(e){var t=e.target,a=t.parentNode.nextElementSibling,i=g(t),n=r[i].onChange,o=t.innerHTML;a.value=o,function(e,t){e.dispatchEvent(new Event(t,{bubbles:!0}))}(a,"change"),n&&n(o)})),f(t,"paste",P)}))}(window,document);
//# sourceMappingURL=wysi.min.js.map
